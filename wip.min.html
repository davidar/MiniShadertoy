<!doctype html>
<meta charset=utf-8>
<body id=b>
<canvas id=a width=640 height=360>
<script>
d = document;
g = a.getContext('webgl');

/* Golf starts here */

a.style="width:49.5%;height:96vh";b.innerHTML+=`<textarea id=c style=width:49.5%;height:96vh>void mainImage(out vec4 fragColor,in vec2 fragCoord){
 vec4 p=vec4((fragCoord.xy/iResolution.xy-.5)*2.,0,1);
 fragColor=p+sin(atan(p.y,p.x)*9.)*sin(p*iGlobalTime/2.+9./dot(p,p)+iGlobalTime*5.);
}`;for(i in g=a.getContext`webgl`)g[i[0]+i[6]]=g[i];if(l=location.hash)c.value=atob(l.slice(1));iMouse=[0];with(g)(oninput=e=>{/*location.hash=btoa(c.value);*/p=cP();sS(s=cS(35633),`attribute vec2 p;void main(){gl_Position=vec4(p,0,1);}`);ce(s);aS(p,s);sS(s=cS(FN),`precision mediump float;uniform float iGlobalTime,iFrame,iDate,iTimeDelta;varying lowp vec4 fragCoord;uniform vec2 iResolution;uniform vec4 iMouse;${c.value}void main(){mainImage(gl_FragColor,gl_FragCoord.xy);gl_FragColor.w=1.;}`);ce(s);aS(p,s);lo(p);ug(p);bf(g=34962,cB());eV(0);vA(0,2,5120,0,0,0);bD(g,new Int8Array([-3,1,1,-3,1,1]),35044);o=iFrame=0;f=new Date/1E3;d=0})(),(L=e=>{d=new Date/1E3-f;f=new Date/1E3;uniform1f(gf(p,`iTimeDelta`),d);uniform1f(gf(p,`iGlobalTime`),o+=d);uniform1f(gf(p,`iFrame`),iFrame++);uniform1f(gf(p,`iDate`),~~f);uniform4f(gf(p,`iMouse`),iMouse[0],iMouse[1],iMouse[2],iMouse[3]);uniform2f(getUniformLocation(p,`iResolution`),640,360);dr(6,0,3);requestAnimationFrame(L)})();y=z=1;
onmousedown=onmouseup=e=>y^=1;
a.onmousemove=e=>y||([iMouse[0],iMouse[1]]=[.495*e.pageX*z,e.pageY]);
a.onclick=e=>[iMouse[2],iMouse[3]]=[.495*e.pageX*z,e.pageY];
a.ondblclick=e=>{z=3-z,a.style.width=c.style.width=49.5*z+`%`}

/* End of golf */

</script>