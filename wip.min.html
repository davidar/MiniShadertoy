<!doctype html>
<meta charset=utf-8>
<body id=b>
<script>
d = document;

/* Golf starts here */

b.innerHTML+=`<canvas id=a width=600 height=400 style='border:1px solid#000;width:50vw;height:95vh'>`;
b.innerHTML+=`<textarea id=c style='width:46vw;height:95vh' spellcheck=false>void mainImage(out vec4 fragColor,in vec2 fragCoord){
  vec4 p=vec4((fragCoord.xy/iResolution.xy-.5)*2.,0,1);
  fragColor=p+sin(atan(p.y,p.x)*9.)*sin(p*iGlobalTime/2.+9./dot(p,p)+iGlobalTime*5.);
}`;
g=a.getContext("webgl");if(l=location.hash)c.value=atob(l.slice(1));iMouse=[];
(oninput=()=>{P=g.createProgram();g.shaderSource(S=g.createShader(g.VERTEX_SHADER),"attribute vec2 P;void main(){gl_Position=vec4(P,0,1);}");g.compileShader(S);g.attachShader(P,S);g.shaderSource(S=g.createShader(g.FRAGMENT_SHADER),"precision mediump float;uniform float iGlobalTime,iFrame,iDate;varying lowp vec4 fragCoord;uniform vec2 iResolution;uniform vec4 iMouse;"+c.value+"void main(){mainImage(gl_FragColor,gl_FragCoord.xy);gl_FragColor.w=1.;}");g.compileShader(S);g.attachShader(P,S);g.linkProgram(P);
g.useProgram(P);g.bindBuffer(B=g.ARRAY_BUFFER,g.createBuffer());g.enableVertexAttribArray(0);g.vertexAttribPointer(0,2,g.BYTE,0,0,0);g.bufferData(B,new Int8Array([-3,1,1,-3,1,1]),g.STATIC_DRAW);iFrame=iGlobalTime=0})();d=new Date;
(L=()=>{g.uniform1f(g.getUniformLocation(P,"iGlobalTime"),iGlobalTime+=.016);g.uniform1f(g.getUniformLocation(P,"iFrame"),iFrame++);g.uniform1f(g.getUniformLocation(P,"iTimeDelta"),d-(d=new Date));g.uniform1f(g.getUniformLocation(P,"iDate"),~~(d/1E3));g.uniform4f(g.getUniformLocation(P,"iMouse"),iMouse[0],iMouse[1],iMouse[2],iMouse[3]);g.uniform2f(g.getUniformLocation(P,"iResolution"),640,360);g.drawArrays(g.TRIANGLE_FAN,0,3);requestAnimationFrame(L)})();
a.onmousemove=e=>{iMouse[0]=e.pageX;iMouse[1]=e.pageY}
a.onclick=e=>{iMouse[2]=e.pageX;iMouse[3]=e.pageY}

/* End of golf */

</script>