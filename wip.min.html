<!doctype html>
<meta charset=utf-8>
<body id=b>
<canvas id=a width=640 height=360>
<script>
d = document;
g = a.getContext('webgl');

/* Golf starts here */

b.innerHTML+=`<textarea id=c>`;b.style.margin=0;a.style=c.style="width:50%;height:100vh;float:left;margin:0;padding:0;border:0";c.value=atob(location.hash.slice(1)||btoa(`void mainImage(out vec4 fragColor,vec2 fragCoord){vec4 p=vec4((fragCoord/iResolution-.5)*2.,0,1);fragColor=p+sin(atan(p.y,p.x)*9.)*sin(p*iGlobalTime/2.+9./dot(p,p)+iGlobalTime*5.);}`));for(i in g=a.getContext`webgl`)g[i[0]+i[6]]=g[i];iMouse=[0];with(g)(oninput=e=>{location.hash=btoa(c.value);h=FN;A=e=>sS(S=cS(h++),e)|ce(S)|!aS(p,S);vA(p=cP(),2,5120,bD(B=ET-3,Int8Array.of(A(`precision mediump float;uniform float iGlobalTime,iFrame,iDate,iTimeDelta;uniform vec2 iResolution;uniform vec4 iMouse;${c.value}void main(){mainImage(gl_FragColor,gl_FragCoord.xy);gl_FragColor.w=1.;}`),B,!eV(bf(B,cB())),A`attribute vec4 p;void main(){gl_Position=p;}`),B+82),!lo(p),ug(p));o=iFrame=d=0;f=new Date/1E3})(),(L=e=>{d=new Date/1E3-f;f=new Date/1E3;uniform1f(gf(p,`iTimeDelta`),d);uniform1f(gf(p,`iGlobalTime`),o+=d);uniform1f(gf(p,`iDate`),~~f);uniform4f(gf(p,`iMouse`),iMouse[0],iMouse[1],iMouse[2],iMouse[3]);uniform2f(getUniformLocation(p,`iResolution`),640,360);dr(6,uniform1f(gf(p,`iFrame`),iFrame++),3);requestAnimationFrame(L)})();y=z=1;onmousedown=onmouseup=e=>y^=1;a.onmousemove=e=>y||([iMouse[0],iMouse[1]]=[.5*e.pageX*z,e.pageY]);a.onclick=e=>[iMouse[2],iMouse[3]]=[.5*e.pageX*z,e.pageY];a.ondblclick=e=>{z=3-z,a.style.width=c.style.width=50*z+`%`}

/* End of golf */

</script>